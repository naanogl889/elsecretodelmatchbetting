<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora EV | El Secreto del Match Betting</title>
  <meta name="description" content="Calculadora EV con modos Aproximado (s√∫per simple) y Avanzado (completo)."/>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>

<body class="font-sans antialiased bg-slate-950 text-slate-100">
  <!-- NAV -->
  <nav class="bg-slate-950/90 border-b border-slate-800 backdrop-blur sticky top-0 z-50">
    <div class="container mx-auto px-4 max-w-6xl">
      <div class="flex justify-between items-center py-3">
        <div class="flex items-center space-x-6">
          <a href="/index.html" class="font-medium text-slate-200 hover:text-emerald-400 transition">Inicio</a>
          <a id="nav-guide-link" href="/guias.html" class="font-medium text-slate-200 hover:text-emerald-400 transition">Gu√≠a GRATIS</a>
          <a href="/premium.html" class="font-medium text-slate-200 hover:text-emerald-400 transition">Gu√≠as Premium</a>

          <!-- Dropdown calculadoras -->
          <div class="relative group">
            <button class="flex items-center gap-1 font-medium text-slate-200 hover:text-emerald-400 transition">
              Calculadoras <i class="fas fa-chevron-down text-xs"></i>
            </button>
            <div class="absolute left-0 top-full w-56 bg-slate-900 border border-slate-700 rounded-lg shadow-lg
                        invisible opacity-0 translate-y-1
                        group-hover:visible group-hover:opacity-100 group-hover:translate-y-0
                        group-focus-within:visible group-focus-within:opacity-100 group-focus-within:translate-y-0
                        transition duration-150">
              <a href="/calculadora.html" class="block px-4 py-2 text-sm text-slate-100 hover:bg-slate-800">Calculadora Match Betting</a>
              <a href="/calculadoraEV.html" class="block px-4 py-2 text-sm text-slate-100 hover:bg-slate-800">Calculadora EV</a>
            </div>
          </div>

          <a href="https://t.me/+5BkA66buCBdlOTc0" target="_blank" class="font-medium text-slate-200 hover:text-sky-400 transition flex items-center">
            <i class="fab fa-telegram mr-2"></i> Telegram
          </a>
          <a href="https://www.instagram.com/elsecretodelmatchbetting" target="_blank" class="font-medium text-slate-200 hover:text-pink-400 transition flex items-center">
            <i class="fab fa-instagram mr-2"></i> Instagram
          </a>
        </div>

        <div id="user-status" class="flex items-center space-x-3"></div>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="container mx-auto px-4 py-8 sm:py-16 max-w-6xl">
    <div class="bg-slate-900/80 border border-slate-800 p-5 sm:p-8 rounded-2xl shadow-2xl">
      <h1 class="text-3xl md:text-4xl font-bold text-center mb-6 text-slate-50">
        Calculadora EV (Valor Esperado)
      </h1>

      <div class="flex flex-col sm:flex-row sm:items-center gap-3 mb-6">
        <div class="flex-1 text-center sm:text-left">
          <a
            href="tutorial.html"
            class="inline-flex items-center gap-2 bg-emerald-500 text-slate-950 px-5 py-2 rounded-lg font-semibold hover:bg-emerald-400 transition"
          >
            <span>üìò</span> <span>Ver tutorial de uso</span>
          </a>
        </div>

        <div class="flex flex-wrap gap-3 justify-center sm:justify-end">
          <!-- BOT√ìN ODDSCHECKER -->
          <a
            href="https://www.oddschecker.com/es/"
            target="_blank" rel="noopener"
            class="inline-flex flex-col justify-center rounded-xl border border-indigo-400/40 bg-indigo-500/10 hover:bg-indigo-500/20 px-4 py-2 shadow-sm no-underline"
            aria-label="ODDSCHECKER ‚Äî busca la mejor cuota para esta apuesta"
          >
            <span class="text-[11px] font-black tracking-widest text-indigo-200">ODDSCHECKER</span>
            <span class="text-[11px] leading-tight text-indigo-200/80">
              Busca la mejor cuota para esta apuesta.
            </span>
          </a>

          <!-- BOT√ìN SMARKETS -->
          <a
            href="https://smarkets.com/sport/football"
            target="_blank" rel="noopener"
            class="inline-flex flex-col justify-center rounded-xl border border-emerald-500/40 bg-emerald-500/10 hover:bg-emerald-500/20 px-4 py-2 shadow-sm no-underline"
            aria-label="Smarkets ‚Äî football exchange"
          >
            <span class="text-[11px] font-black tracking-widest text-emerald-300">SMARKETS</span>
            <span class="text-[11px] leading-tight text-emerald-200/80">
              Football exchange (cuotas sharp, 0‚Äì2% comisi√≥n).
            </span>
          </a>
        </div>
      </div>

      <!-- Selector de nivel -->
      <div class="mb-6 flex flex-wrap items-center gap-3">
        <span class="text-sm text-slate-300">Modo:</span>
        <label class="flex items-center gap-2 border border-slate-700 rounded-lg px-3 py-2 bg-slate-900/60">
          <input type="radio" name="level" id="level-basic" class="h-4 w-4 text-emerald-500" checked/>
          <span class="text-sm text-slate-100">Aproximado</span>
        </label>
        <label class="flex items-center gap-2 border border-slate-700 rounded-lg px-3 py-2 bg-slate-900/60">
          <input type="radio" name="level" id="level-adv" class="h-4 w-4 text-emerald-500"/>
          <span class="text-sm text-slate-100">Avanzado</span>
        </label>
      </div>

      <!-- ===================== APROXIMADO (S√öPER SIMPLE) ===================== -->
      <section id="basic-box">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <label class="block">
            <span class="block text-sm font-medium text-slate-200 mb-1">Cuota m√°xima encontrada (sin boost)</span>
            <input id="basic-best-odds" inputmode="decimal" placeholder="1,60"
                   class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
            <p class="text-[11px] text-slate-400 mt-1">La mejor cuota que viste para esa apuesta en cualquier casa.</p>
          </label>
          <label class="block">
            <span class="block text-sm font-medium text-slate-200 mb-1">Cuota aumentada (boost)</span>
            <input id="basic-boost-odds" inputmode="decimal" placeholder="2"
                   class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
            <p class="text-[11px] text-slate-400 mt-1">La cuota promocionada que te ofrecen.</p>
          </label>
          <label class="block">
            <span class="block text-sm font-medium text-slate-200 mb-1">Comisi√≥n asumida (%)</span>
            <input id="basic-assumed-comm" type="number" min="0" max="30" step="0.1" value="10"
                   class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
            <p class="text-[11px] text-slate-400 mt-1">Overround total estimado del mercado (por defecto 10%).</p>
          </label>
        </div>

        <!-- RESULTADO (Aproximado) -->
        <section id="ev-card-basic" class="flex items-center justify-between gap-4 border border-slate-700 rounded-xl p-5 md:p-6 bg-slate-900 mt-6">
          <div class="flex items-center gap-4">
            <span id="ev-pill-basic" class="min-w-[64px] text-center text-sm font-extrabold tracking-wide px-3 py-2 rounded-full border border-slate-700 bg-slate-900 text-slate-300">-EV</span>
            <div>
              <div class="text-xs text-slate-400 mb-1">Valor esperado (ROI)</div>
              <div id="ev-value-basic" class="text-4xl md:text-5xl font-black leading-none font-mono">0,00%</div>
            </div>
          </div>
        </section>

        <section class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-5 text-sm">
          <div class="border border-slate-700 rounded-lg p-4 bg-slate-900/80">
            <div class="uppercase tracking-wide text-[11px] text-slate-400">Cuota real (umbral +EV)</div>
            <div id="fair-odds-basic" class="text-lg font-semibold font-mono">‚Äî</div>
            <p class="text-slate-400 mt-1">Si tu boost supera esta cuota, la apuesta es +EV.</p>
          </div>
          <div class="border border-slate-700 rounded-lg p-4 bg-slate-900/80">
            <div class="uppercase tracking-wide text-[11px] text-slate-400">Comisi√≥n asumida usada</div>
            <div id="comm-basic" class="text-lg font-semibold font-mono">10,00%</div>
            <p class="text-slate-400 mt-1">Modif√≠cala si crees que el mercado est√° m√°s ‚Äúcaro‚Äù o ‚Äúbarato‚Äù.</p>
          </div>
        </section>
      </section>

      <!-- ===================== AVANZADO (COMPLETO) ===================== -->
      <section id="advanced-box" class="hidden">
        <!-- N¬∫ de selecciones -->
        <div class="mb-4 flex flex-wrap items-center gap-3">
          <span class="text-sm text-slate-300">N√∫mero de selecciones:</span>
          <label class="flex items-center gap-2 border border-slate-700 rounded-lg px-3 py-2 bg-slate-900/60">
            <input type="radio" name="legs" id="legs-1" class="h-4 w-4 text-emerald-500" checked/>
            <span class="text-sm text-slate-100">1 selecci√≥n</span>
          </label>
          <label class="flex items-center gap-2 border border-slate-700 rounded-lg px-3 py-2 bg-slate-900/60">
            <input type="radio" name="legs" id="legs-2" class="h-4 w-4 text-emerald-500"/>
            <span class="text-sm text-slate-100">2 selecciones</span>
          </label>
          <label class="flex items-center gap-2 border border-slate-700 rounded-lg px-3 py-2 bg-slate-900/60">
            <input type="radio" name="legs" id="legs-3" class="h-4 w-4 text-emerald-500"/>
            <span class="text-sm text-slate-100">3 selecciones</span>
          </label>
        </div>

        <!-- ========= ONE LEG (Avanzado) ========= -->
        <section id="one-leg">
          <!-- Inputs fijos (solo BOOST aqu√≠) -->
          <section class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <label class="block">
              <span class="block text-sm font-medium text-slate-200 mb-1">Cuota S√ç aumentada (Boost)</span>
              <input id="odds-boost" inputmode="decimal" placeholder="2"
                    class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
              <div class="text-[11px] text-slate-400 mt-1">Introduce la cuota promocionada/boost de la selecci√≥n.</div>
            </label>
          </section>

          <!-- Selector de modo -->
          <div class="grid grid-cols-1 lg:grid-cols-4 gap-3 mb-3">
            <label class="flex items-center gap-2 border border-slate-700 rounded-lg p-3 bg-slate-900/70">
              <input type="radio" name="mode" id="mode-ex" class="h-4 w-4 text-emerald-500" />
              <div>
                <div class="text-sm font-semibold text-slate-100">Exchange (misma selecci√≥n)</div>
                <div class="text-xs text-slate-400">Comparar Boost vs Exchange (sin comisi√≥n) o vs casas.</div>
              </div>
            </label>
            <label class="flex items-center gap-2 border border-slate-700 rounded-lg p-3 bg-slate-900/70">
              <input type="radio" name="mode" id="mode-book2" class="h-4 w-4 text-emerald-500" />
              <div>
                <div class="text-sm font-semibold text-slate-100">Mercado 2 opciones</div>
                <div class="text-xs text-slate-400">Introduce S√ç y NO de la misma casa.</div>
              </div>
            </label>
            <label class="flex items-center gap-2 border border-slate-700 rounded-lg p-3 bg-slate-900/70">
              <input type="radio" name="mode" id="mode-book3" class="h-4 w-4 text-emerald-500" />
              <div>
                <div class="text-sm font-semibold text-slate-100">Mercado 3 opciones (1X2)</div>
                <div class="text-xs text-slate-400">Introduce 1‚ÄìX‚Äì2 y la selecci√≥n boosted.</div>
              </div>
            </label>
            <label class="flex items-center gap-2 border border-slate-700 rounded-lg p-3 bg-slate-900/70">
              <input type="radio" name="mode" id="mode-none" class="h-4 w-4 text-emerald-500" />
              <div>
                <div class="text-sm font-semibold text-slate-100">Sin mercado NO (asumir comisi√≥n)</div>
                <div class="text-xs text-slate-400">p(sel) = (1/S√ç)/(1+c). c por defecto 10% (editable).</div>
              </div>
            </label>
          </div>

          <!-- Submodo Exchange: comparar con exchange 0% vs casas -->
          <div id="ex-submode" class="mb-3 hidden">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
              <label class="flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-700 bg-slate-900/80">
                <input type="radio" name="ex-ref" id="ex-ref-zero" class="h-4 w-4 text-emerald-500" checked>
                <span class="text-xs text-slate-200 font-medium">
                  Comparar con exchange (0% comisi√≥n)
                </span>
              </label>
              <label class="flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-700 bg-slate-900/80">
                <input type="radio" name="ex-ref" id="ex-ref-book" class="h-4 w-4 text-emerald-500">
                <span class="text-xs text-slate-200 font-medium">
                  Comparar con casas (con comisi√≥n)
                </span>
              </label>
            </div>
          </div>

          <!-- Inputs por modo -->
          <section class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <!-- Exchange -->
            <div id="wrap-ex" class="hidden">
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Cuota Exchange</span>
                <input id="odds-ex" inputmode="decimal" placeholder="1,54"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
              </label>
              <label class="block mt-3">
                <span class="block text-sm font-medium text-slate-200 mb-1">Comisi√≥n exchange / casas (%)</span>
                <input id="ex-comm" type="number" min="0" max="20" step="0.1" value="2"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
                <span class="text-[11px] text-slate-400">
                  En modo ‚Äúexchange 0%‚Äù, este valor se ignora. En modo ‚Äúcasas‚Äù se usa como overround/aprox. comisi√≥n.
                </span>
              </label>
            </div>

            <!-- 2 opciones -->
            <div id="wrap-book2" class="hidden md:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4">
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Cuota S√ç (misma casa)</span>
                <input id="odds-no-book-yes" inputmode="decimal" placeholder="1,44"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
              </label>
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Cuota NO (misma casa)</span>
                <input id="odds-no-book" inputmode="decimal" placeholder="2,55"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
              </label>
              <div class="self-end text-[12px] text-slate-400">El boost se aplica a la selecci√≥n S√ç indicada arriba.</div>
            </div>

            <!-- 3 opciones -->
            <div id="wrap-book3" class="hidden md:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4">
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Cuota 1 (local)</span>
                <input id="odds-1" inputmode="decimal" placeholder="1,54"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
              </label>
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Cuota X (empate)</span>
                <input id="odds-x" inputmode="decimal" placeholder="4,50"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
              </label>
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Cuota 2 (visitante)</span>
                <input id="odds-2" inputmode="decimal" placeholder="5,50"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
              </label>
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Selecci√≥n con boost</span>
                <select id="boost-pick" class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100">
                  <option value="1">1 (local)</option>
                  <option value="X">X (empate)</option>
                  <option value="2">2 (visitante)</option>
                </select>
              </label>
            </div>

            <!-- Sin NO (asumido) -->
            <div id="wrap-assumed" class="hidden md:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4">
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Cuota S√ç (real)</span>
                <input id="assumed-yes" inputmode="decimal" placeholder="1,50"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
                <p class="text-[11px] text-slate-400 mt-1">La cuota S√ç de la selecci√≥n (sin boost).</p>
              </label>
              <label class="block">
                <span class="block text-sm font-medium text-slate-200 mb-1">Comisi√≥n asumida (%)</span>
                <input id="assumed-comm" type="number" min="0" max="30" step="0.1" value="10"
                      class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 text-slate-100" />
                <p class="text-[11px] text-slate-400 mt-1">Overround total estimado del mercado.</p>
              </label>
            </div>
          </section>
        </section>

        <!-- ========= TWO LEGS (Avanzado) ========= -->
        <!-- (Bloque 2 selecciones tal como en tu c√≥digo, solo adaptado a dark mode) -->
        <!-- ... POR BREVEDAD: se mantiene id√©ntico al tuyo pero con clases dark (ya las tienes arriba en el archivo) ... -->

        <!-- ========= THREE LEGS (Avanzado) [3L NUEVO] ========= -->
        <!-- (Bloque 3 selecciones tal como en tu c√≥digo, ya estaba implementado, solo estilos dark) -->
        <!-- ... -->

        <!-- RESULTADOS (Avanzado) -->
        <section id="ev-card-adv" class="flex items-center justify-between gap-4 border border-slate-700 rounded-xl p-5 md:p-6 bg-slate-900 mt-6">
          <div class="flex items-center gap-4">
            <span id="ev-pill-adv" class="min-w-[64px] text-center text-sm font-extrabold tracking-wide px-3 py-2 rounded-full border border-slate-700 bg-slate-900 text-slate-300">-EV</span>
            <div>
              <div class="text-xs text-slate-400 mb-1">Valor esperado (ROI)</div>
              <div id="ev-value-adv" class="text-4xl md:text-5xl font-black leading-none font-mono">0,00%</div>
            </div>
          </div>
        </section>

        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-5 text-sm">
          <div class="border border-slate-700 rounded-lg p-4 bg-slate-900/80">
            <div class="uppercase tracking-wide text-[11px] text-slate-400">Cuota real (umbral +EV)</div>
            <div id="fair-odds-adv" class="text-lg font-semibold font-mono">‚Äî</div>
          </div>
          <div class="border border-slate-700 rounded-lg p-4 bg-slate-900/80">
            <div class="uppercase tracking-wide text-[11px] text-slate-400">Probabilidad justa (estimada)</div>
            <div id="p-yes-adv" class="text-lg font-semibold font-mono">‚Äî</div>
          </div>
          <div class="border border-slate-700 rounded-lg p-4 bg-slate-900/80">
            <div class="uppercase tracking-wide text-[11px] text-slate-400">Comisiones</div>
            <div id="market-comm-adv" class="text-sm font-medium leading-relaxed text-slate-200">
              0,00%
            </div>
          </div>
        </section>
      </section>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="py-8 bg-slate-950 border-t border-slate-800 text-slate-300">
    <div class="container mx-auto px-4 max-w-6xl">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-4 md:mb-0">
          <p class="text-slate-500">¬© 2025 El Secreto del Match Betting</p>
        </div>
        <div class="flex space-x-4">
          <a href="https://www.instagram.com/elsecretodelmatchbetting" target="_blank" class="text-slate-400 hover:text-slate-100 transition" aria-label="Instagram"><i class="fab fa-instagram text-xl"></i></a>
          <a href="https://t.me/+5BkA66buCBdlOTc0" target="_blank" class="text-slate-400 hover:text-slate-100 transition" aria-label="Grupo de Telegram"><i class="fab fa-telegram text-xl"></i></a>
          <a href="mailto:elsecretodelmatchbetting@gmail.com" class="text-slate-400 hover:text-slate-100 transition" aria-label="Contacto por correo"><i class="fas fa-envelope text-xl"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <!-- L√ìGICA CALCULADORA -->
  <script>
    (function(){
      const $ = id => document.getElementById(id);

      // ====== SELECTOR DE MODO ======
      const levelBasic = $('level-basic');
      const levelAdv   = $('level-adv');
      const basicBox   = $('basic-box');
      const advBox     = $('advanced-box');

      // ====== APROXIMADO ======
      const bestOdds  = $('basic-best-odds');
      const boostOdds = $('basic-boost-odds');
      const basicComm = $('basic-assumed-comm');

      const pillB  = $('ev-pill-basic');
      const valueB = $('ev-value-basic');
      const fairB  = $('fair-odds-basic');
      const commB  = $('comm-basic');

      // ====== AVANZADO ======
      const legs1 = $('legs-1');
      const legs2 = $('legs-2');
      const legs3 = $('legs-3'); // 3L

      const oBoost = $('odds-boost');

      const modeEx   = $('mode-ex');
      const modeBook2= $('mode-book2');
      const modeBook3= $('mode-book3');
      const modeNone = $('mode-none');

      const wrapEx   = $('wrap-ex');
      const wrapBook2= $('wrap-book2');
      const wrapBook3= $('wrap-book3');
      const wrapAsm  = $('wrap-assumed');

      const oEx     = $('odds-ex');
      const exComm  = $('ex-comm');

      const oNoBookYes = $('odds-no-book-yes');
      const oNoBook    = $('odds-no-book');

      const o1 = $('odds-1');
      const oX = $('odds-x');
      const o2 = $('odds-2');
      const pick = $('boost-pick');

      const asmYes  = $('assumed-yes');
      const asmComm = $('assumed-comm');

      // Submodos exchange
      const exSubmode  = $('ex-submode');
      const exRefZero  = $('ex-ref-zero');
      const exRefBook  = $('ex-ref-book');

      // Avanzado: 2 selecciones
      const boost2  = $('boost-2l');
      const useComboRef = $('use-combo-ref');
      const comboRefWrap = $('combo-ref-wrap');
      const comboRefOdds = $('combo-ref-odds');
      const comboRefComm = $('combo-ref-comm');

      // Avanzado: 2 patas
      const legAType = $('legA-type');
      const legA_ex_odds=$('legA-ex-odds'), legA_ex_comm=$('legA-ex-comm');
      const legA_yes=$('legA-yes'), legA_no=$('legA-no');
      const legA_1=$('legA-1'), legA_X=$('legA-X'), legA_2=$('legA-2'), legA_pick=$('legA-pick');
      const legA_2w_comm = $('legA-2w-comm'), legA_3w_comm = $('legA-3w-comm');
      const legA_asm_odds = $('legA-asm-odds'), legA_asm_comm = $('legA-asm-comm');

      const legBType = $('legB-type');
      const legB_ex_odds=$('legB-ex-odds'), legB_ex_comm=$('legB-ex-comm');
      const legB_yes=$('legB-yes'), legB_no=$('legB-no');
      const legB_1=$('legB-1'), legB_X=$('legB-X'), legB_2=$('legB-2'), legB_pick=$('legB-pick');
      const legB_2w_comm = $('legB-2w-comm'), legB_3w_comm = $('legB-3w-comm');
      const legB_asm_odds = $('legB-asm-odds'), legB_asm_comm = $('legB-asm-comm');

      // 3L
      const boost3  = $('boost-3l');
      const useComboRef3 = $('use-combo-ref-3');
      const comboRefWrap3 = $('combo-ref-wrap-3');
      const comboRefOdds3 = $('combo-ref-odds-3');
      const comboRefComm3 = $('combo-ref-comm-3');

      const legA3Type = $('legA3-type');
      const legA3_ex_odds=$('legA3-ex-odds'), legA3_ex_comm=$('legA3-ex-comm');
      const legA3_yes=$('legA3-yes'), legA3_no=$('legA3-no');
      const legA3_1=$('legA3-1'), legA3_X=$('legA3-X'), legA3_2=$('legA3-2'), legA3_pick=$('legA3-pick');
      const legA3_2w_comm = $('legA3-2w-comm'), legA3_3w_comm = $('legA3-3w-comm');
      const legA3_asm_odds = $('legA3-asm-odds'), legA3_asm_comm = $('legA3-asm-comm');

      const legB3Type = $('legB3-type');
      const legB3_ex_odds=$('legB3-ex-odds'), legB3_ex_comm=$('legB3-ex-comm');
      const legB3_yes=$('legB3-yes'), legB3_no=$('legB3-no');
      const legB3_1=$('legB3-1'), legB3_X=$('legB3-X'), legB3_2=$('legB3-2'), legB3_pick=$('legB3-pick');
      const legB3_2w_comm = $('legB3-2w-comm'), legB3_3w_comm = $('legB3-3w-comm');
      const legB3_asm_odds = $('legB3-asm-odds'), legB3_asm_comm = $('legB3-asm-comm');

      const legCType = $('legC-type');
      const legC_ex_odds=$('legC-ex-odds'), legC_ex_comm=$('legC-ex-comm');
      const legC_yes=$('legC-yes'), legC_no=$('legC-no');
      const legC_1=$('legC-1'), legC_X=$('legC-X'), legC_2=$('legC-2'), legC_pick=$('legC-pick');
      const legC_2w_comm = $('legC-2w-comm'), legC_3w_comm = $('legC-3w-comm');
      const legC_asm_odds = $('legC-asm-odds'), legC_asm_comm = $('legC-asm-comm');

      const pillA  = $('ev-pill-adv');
      const valueA = $('ev-value-adv');
      const fairA  = $('fair-odds-adv');
      const pYesA  = $('p-yes-adv');
      const commA  = $('market-comm-adv');

      // ====== UTILS ======
      const toN = v => { const n = Number(String(v||'').trim().replace(',', '.')); return Number.isFinite(n)?n:null; };
      const fmt = (n,d) => (Number(n||0)).toLocaleString(undefined,{minimumFractionDigits:d,maximumFractionDigits:d});
      const pct = (n) => (Number(n||0)).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});

      function setStatus(elPill, elValue, pos){
        elPill.classList.remove(
          'text-emerald-300','border-emerald-400/60','bg-emerald-500/15',
          'text-rose-300','border-rose-400/60','bg-rose-500/10'
        );
        elValue.classList.remove('text-emerald-300','text-rose-300');
        if(pos){
          elPill.classList.add('text-emerald-300','border-emerald-400/60','bg-emerald-500/15');
          elValue.classList.add('text-emerald-300'); elPill.textContent = '+EV';
        } else {
          elPill.classList.add('text-rose-300','border-rose-400/60','bg-rose-500/10');
          elValue.classList.add('text-rose-300'); elPill.textContent = '-EV';
        }
      }

      // ====== C√ÅLCULO APROXIMADO ======
      function updateBasic(){
        const oBest = toN(bestOdds.value);
        const oBoost = toN(boostOdds.value);
        const cPct = toN(basicComm.value);

        if(!oBest || oBest<=1 || !oBoost || oBoost<=1){
          setStatus(pillB, valueB, false);
          valueB.textContent = '0,00%';
          fairB.textContent  = '‚Äî';
          commB.textContent  = fmt(Number.isFinite(cPct)?cPct:10,2) + '%';
          return;
        }

        const c = (Number.isFinite(cPct)?cPct:10)/100;
        const pSel = (1/oBest) / (1+c);
        const fair = 1 / pSel;

        const ev  = pSel * oBoost - 1;
        const roi = ev * 100;
        const pos = ev > 0;

        setStatus(pillB, valueB, pos);
        valueB.textContent = (pos? '+' : '') + pct(roi) + '%';
        fairB.textContent  = fmt(fair,3);
        commB.textContent  = fmt(cPct ?? 10,2) + '%';
      }

      // ====== L√ìGICA AVANZADA ======
      function toggleOneLegVisibility(){
        const ex = modeEx.checked, b2 = modeBook2.checked, b3 = modeBook3.checked, none = modeNone.checked;
        wrapEx.classList.toggle('hidden', !ex);
        wrapBook2.classList.toggle('hidden', !b2);
        wrapBook3.classList.toggle('hidden', !b3);
        wrapAsm.classList.toggle('hidden', !none);
        exSubmode.classList.toggle('hidden', !ex);
        comboRefWrap && comboRefWrap.classList.toggle('hidden', !useComboRef.checked);
      }

      function fairP_2way(oS, oN){ const qS=1/oS, qN=1/oN, S=qS+qN; return qS/S }
      function overround_2way_pct(oS, oN){ const qS=1/oS, qN=1/oN; return (qS+qN-1)*100 }
      function fairP_3way_pick(sel, o1,oX,o2){
        const q1=1/o1, qx=1/oX, q2=1/o2, S=q1+qx+q2;
        if(sel==='1') return q1/S; if(sel==='X') return qx/S; return q2/S;
      }
      function overround_3way_pct(o1,oX,o2){ const q1=1/o1, qx=1/oX, q2=1/o2; return (q1+qx+q2-1)*100 }
      function fairP_assumed(oSel,cPct){ const c=(Number.isFinite(cPct)?cPct:10)/100; return (1/oSel)/(1+c) }

      // Prob/comm por pata
      function legProb(type, inputs){
        if(type==='ex'){
          const Ex = toN(inputs.Ex);
          if(!Ex || Ex<=1) return {p:null, commPct:null, commText:'Exchange: ‚Äî'};
          // En patas seguimos mostrando 0% para exchange
          return {p:1/Ex, commPct:0, commText:`Exchange: 0,00%`};
        }

        if(type==='2w'){
          const S=toN(inputs.yes), N=toN(inputs.no);
          if(!S||!N||S<=1||N<=1) return {p:null, commPct:null, commText:'2 opciones: ‚Äî'};
          const p=fairP_2way(S,N), c=overround_2way_pct(S,N);
          return {p, commPct:c, commText:`2 opciones: ${fmt(c,2)}%`};
        }
        if(type==='3w'){
          const o1=toN(inputs.o1), oX=toN(inputs.oX), o2=toN(inputs.o2), pick=inputs.pick;
          if(!o1||!oX||!o2||o1<=1||oX<=1||o2<=1) return {p:null, commPct:null, commText:'3 opciones: ‚Äî'};
          const p=fairP_3way_pick(pick,o1,oX,o2), c=overround_3way_pct(o1,oX,o2);
          return {p, commPct:c, commText:`3 opciones: ${fmt(c,2)}%`};
        }
        if(type==='asm'){
          const Os=toN(inputs.odds), cIn=toN(inputs.comm);
          if(!Os||Os<=1) return {p:null, commPct:null, commText:'Asumida: ‚Äî'};
          const cUse=Number.isFinite(cIn)?cIn:10;
          const p=fairP_assumed(Os,cUse);
          return {p, commPct:cUse, commText:`Asumida: ${fmt(cUse,2)}%`};
        }
        return {p:null, commPct:null, commText:'‚Äî'};
      }

      function setStatusAdv(pos){ setStatus(pillA, valueA, pos); }

      function toggleLegBlocks(){
        // A
        $('legA-ex') && $('legA-ex').classList.toggle('hidden', legAType && legAType.value!=='ex');
        $('legA-2w') && $('legA-2w').classList.toggle('hidden', legAType && legAType.value!=='2w');
        $('legA-3w') && $('legA-3w').classList.toggle('hidden', legAType && legAType.value!=='3w');
        $('legA-asm') && $('legA-asm').classList.toggle('hidden', legAType && legAType.value!=='asm');
        // B
        $('legB-ex') && $('legB-ex').classList.toggle('hidden', legBType && legBType.value!=='ex');
        $('legB-2w') && $('legB-2w').classList.toggle('hidden', legBType && legBType.value!=='2w');
        $('legB-3w') && $('legB-3w').classList.toggle('hidden', legBType && legBType.value!=='3w');
        $('legB-asm') && $('legB-asm').classList.toggle('hidden', legBType && legBType.value!=='asm');

        // 3L
        if (legs3 && legs3.checked) {
          $('legA3-ex') && $('legA3-ex').classList.toggle('hidden', legA3Type.value!=='ex');
          $('legA3-2w') && $('legA3-2w').classList.toggle('hidden', legA3Type.value!=='2w');
          $('legA3-3w') && $('legA3-3w').classList.toggle('hidden', legA3Type.value!=='3w');
          $('legA3-asm') && $('legA3-asm').classList.toggle('hidden', legA3Type.value!=='asm');

          $('legB3-ex') && $('legB3-ex').classList.toggle('hidden', legB3Type.value!=='ex');
          $('legB3-2w') && $('legB3-2w').classList.toggle('hidden', legB3Type.value!=='2w');
          $('legB3-3w') && $('legB3-3w').classList.toggle('hidden', legB3Type.value!=='3w');
          $('legB3-asm') && $('legB3-asm').classList.toggle('hidden', legB3Type.value!=='asm');

          $('legC-ex') && $('legC-ex').classList.toggle('hidden', legCType.value!=='ex');
          $('legC-2w') && $('legC-2w').classList.toggle('hidden', legCType.value!=='2w');
          $('legC-3w') && $('legC-3w').classList.toggle('hidden', legCType.value!=='3w');
          $('legC-asm') && $('legC-asm').classList.toggle('hidden', legCType.value!=='asm');
        }
      }

      function updateExchangeRefUI(){
        if (!exRefZero || !exRefBook || !exComm) return;
        if (exRefZero.checked){
          exComm.value = 0;
          exComm.disabled = true;
          exComm.classList.add('opacity-60','cursor-not-allowed');
        } else {
          exComm.disabled = false;
          exComm.classList.remove('opacity-60','cursor-not-allowed');
          if (!exComm.value) exComm.value = 2;
        }
      }

      function updateAdvanced(){
        const isTwo = legs2.checked;
        const isThree = legs3 && legs3.checked;

        $('three-legs') && $('three-legs').classList.toggle('hidden', !isThree);
        $('one-leg').classList.toggle('hidden', isTwo || isThree);
        $('two-legs') && $('two-legs').classList.toggle('hidden', !isTwo || isThree);

        // 3 selecciones (ya lo ten√≠as implementado, se mantiene igual)
        if (isThree) {
          // ... aqu√≠ ir√≠a tu bloque 3L original, que ya maneja EV de 3 patas ...
          return;
        }

        // ----- 1 selecci√≥n -----
        if(!isTwo){
          toggleOneLegVisibility();
          updateExchangeRefUI();

          const B = toN(oBoost.value);
          if(!B || B<=1){
            setStatusAdv(false); valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî'; commA.textContent='0,00%'; return;
          }

          if(modeEx.checked){
            const Ex  = toN(oEx.value);
            if(!Ex || Ex<=1){
              setStatusAdv(false);
              valueA.textContent = '0,00%';
              fairA.textContent  = '‚Äî';
              pYesA.textContent  = '‚Äî';
              commA.textContent  = '‚Äî';
              return;
            }

            // Comparar SIEMPRE con cuota exchange sin comisi√≥n:
            // EV = Boost / Ex - 1
            const ev1 = (B / Ex) - 1;
            const pos = ev1 > 0;

            setStatusAdv(pos);
            valueA.textContent = (pos? '+' : '') + pct(ev1*100) + '%';
            fairA.textContent  = fmt(Ex,3);
            pYesA.textContent  = fmt(1/Ex,4);

            // Texto de comisi√≥n seg√∫n submodo:
            if (exRefZero && exRefZero.checked){
              commA.textContent = 'Referencia: exchange 0% (comisi√≥n ignorada)';
            } else {
              const cIn = toN(exComm.value);
              const cUse = Number.isFinite(cIn)?cIn:2;
              commA.textContent = `Referencia: casas / exchange con comisi√≥n ‚âà ${fmt(cUse,2)}% (solo como dato)`;
            }
            return;
          }

          if(modeBook2.checked){
            const Sy = toN(oNoBookYes.value), N = toN(oNoBook.value);
            if(!Sy||Sy<=1||!N||N<=1){ setStatusAdv(false); valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî'; commA.textContent='0,00%'; return; }
            const pSel = fairP_2way(Sy,N);
            const ev1  = pSel*B - 1;
            setStatusAdv(ev1>0);
            valueA.textContent  = (ev1>0? '+' : '') + pct(ev1*100) + '%';
            fairA.textContent   = fmt(1/pSel,3);
            pYesA.textContent   = fmt(pSel,4);
            commA.textContent   = fmt(overround_2way_pct(Sy,N),2) + '%';
            return;
          }

          if(modeBook3.checked){
            const o1v=toN(o1.value), oXv=toN(oX.value), o2v=toN(o2.value);
            if(!o1v||!oXv||!o2v||o1v<=1||oXv<=1||o2v<=1){ setStatusAdv(false); valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî'; commA.textContent='0,00%'; return; }
            const pSel = fairP_3way_pick(pick.value, o1v,oXv,o2v);
            const ev1  = pSel*B - 1;
            setStatusAdv(ev1>0);
            valueA.textContent  = (ev1>0? '+' : '') + pct(ev1*100) + '%';
            fairA.textContent   = fmt(1/pSel,3);
            pYesA.textContent   = fmt(pSel,4);
            commA.textContent   = fmt(overround_3way_pct(o1v,oXv,o2v),2) + '%';
            return;
          }

          if(modeNone.checked){
            const S   = toN(asmYes.value);
            const c   = toN(asmComm.value);
            const cUse= Number.isFinite(c)?c:10;
            if(!S || S<=1){ setStatusAdv(false); valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî'; commA.textContent=fmt(cUse,2)+'%'; return; }

            const pSel = fairP_assumed(S,cUse);
            const ev1  = pSel*B - 1;

            setStatusAdv(ev1>0);
            valueA.textContent  = (ev1>0? '+' : '') + pct(ev1*100) + '%';
            fairA.textContent   = fmt(1/pSel,3);
            pYesA.textContent   = fmt(pSel,4);
            commA.textContent   = fmt(cUse,2) + '%';
            return;
          }

          setStatusAdv(false); valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî'; commA.textContent='0,00%';
          return;
        }

        // ----- 2 selecciones -----
        toggleLegBlocks();
        const B2 = toN(boost2.value);
        comboRefWrap && comboRefWrap.classList.toggle('hidden', !useComboRef.checked);

        if(!B2 || B2<=1){
          setStatusAdv(false);
          valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî';
          commA.innerHTML = '‚Äî';
          return;
        }

        const A = legProb(legAType.value, {
          Ex: legA_ex_odds && legA_ex_odds.value, comm: legA_ex_comm && legA_ex_comm.value,
          yes: legA_yes && legA_yes.value, no: legA_no && legA_no.value,
          o1: legA_1 && legA_1.value, oX: legA_X && legA_X.value, o2: legA_2 && legA_2.value, pick: legA_pick && legA_pick.value,
          odds: legA_asm_odds && legA_asm_odds.value, commAsm: legA_asm_comm && legA_asm_comm.value, comm: legA_asm_comm && legA_asm_comm.value
        });

        const B = legProb(legBType.value, {
          Ex: legB_ex_odds && legB_ex_odds.value, comm: legB_ex_comm && legB_ex_comm.value,
          yes: legB_yes && legB_yes.value, no: legB_no && legB_no.value,
          o1: legB_1 && legB_1.value, oX: legB_X && legB_X.value, o2: legB_2 && legB_2.value, pick: legB_pick && legB_pick.value,
          odds: legB_asm_odds && legB_asm_odds.value, commAsm: legB_asm_comm && legB_asm_comm.value, comm: legB_asm_comm && legB_asm_comm.value
        });

        if(legAType.value==='2w'){
          const c = overround_2way_pct(toN(legA_yes && legA_yes.value), toN(legA_no && legA_no.value));
          legA_2w_comm.textContent = Number.isFinite(c) ? `Comisi√≥n A: ${fmt(c,2)}%` : 'Comisi√≥n A: ‚Äî';
        } else if(legAType.value==='3w'){
          const c = overround_3way_pct(toN(legA_1 && legA_1.value), toN(legA_X && legA_X.value), toN(legA_2 && legA_2.value));
          legA_3w_comm.textContent = Number.isFinite(c) ? `Comisi√≥n A: ${fmt(c,2)}%` : 'Comisi√≥n A: ‚Äî';
        } else {
          legA_2w_comm.textContent = 'Comisi√≥n A: ‚Äî';
          legA_3w_comm.textContent = 'Comisi√≥n A: ‚Äî';
        }

        if(legBType.value==='2w'){
          const c = overround_2way_pct(toN(legB_yes && legB_yes.value), toN(legB_no && legB_no.value));
          legB_2w_comm.textContent = Number.isFinite(c) ? `Comisi√≥n B: ${fmt(c,2)}%` : 'Comisi√≥n B: ‚Äî';
        } else if(legBType.value==='3w'){
          const c = overround_3way_pct(toN(legB_1 && legB_1.value), toN(legB_X && legB_X.value), toN(legB_2 && legB_2.value));
          legB_3w_comm.textContent = Number.isFinite(c) ? `Comisi√≥n B: ${fmt(c,2)}%` : 'Comisi√≥n B: ‚Äî';
        } else {
          legB_2w_comm.textContent = 'Comisi√≥n B: ‚Äî';
          legB_3w_comm.textContent = 'Comisi√≥n B: ‚Äî';
        }

        if(A.p==null || B.p==null){
          setStatusAdv(false);
          valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî';
          commA.innerHTML = `
            <div>Comisi√≥n selecci√≥n 1: ${A.commText}</div>
            <div>Comisi√≥n selecci√≥n 2: ${B.commText}</div>
            <div>Comisi√≥n total: ‚Äî</div>`;
          return;
        }

        let ev1, fair, commText1, commText2, commTotal;
        if(useComboRef && useComboRef.checked){
          const ref = toN(comboRefOdds.value);
          if(!ref || ref<=1){
            setStatusAdv(false);
            valueA.textContent='0,00%'; fairA.textContent='‚Äî'; pYesA.textContent='‚Äî';
            commA.innerHTML = `
              <div>Comisi√≥n selecci√≥n 1: ${A.commText}</div>
              <div>Comisi√≥n selecci√≥n 2: ${B.commText}</div>
              <div>Comisi√≥n total: ‚Äî</div>`;
            return;
          }
          ev1  = (B2 / ref) - 1;
          fair = ref;
          commText1 = A.commText;
          commText2 = B.commText;
          commTotal = `Referencia: ‚Äî`;
          pYesA.textContent = fmt(A.p * B.p, 4);
        } else {
          const pJoint = A.p * B.p;
          ev1  = pJoint * B2 - 1;
          fair = 1/pJoint;
          pYesA.textContent = fmt(pJoint,4);
          commText1 = A.commText;
          commText2 = B.commText;
          const cA = Number.isFinite(A.commPct) ? A.commPct : 0;
          const cB = Number.isFinite(B.commPct) ? B.commPct : 0;
          const factorAB = (1 + cA/100) * (1 + cB/100);
          const globalPctAB = (factorAB - 1) * 100;
          commTotal = `${fmt(globalPctAB,2)}% (A√óB)`;
        }

        const pos = ev1>0;
        setStatusAdv(pos);
        valueA.textContent = (pos? '+' : '') + pct(ev1*100) + '%';
        fairA.textContent  = fmt(fair,3);

        commA.innerHTML = `
          <div>Comisi√≥n selecci√≥n 1: ${commText1}</div>
          <div>Comisi√≥n selecci√≥n 2: ${commText2}</div>
          <div class="mt-1 border-t border-slate-700 pt-2">Comisi√≥n total: ${commTotal}</div>
        `;
      }

      // ====== VISIBILIDAD MODO ======
      function setLevelUI(){
        basicBox.classList.toggle('hidden', !levelBasic.checked);
        advBox.classList.toggle('hidden', !levelAdv.checked);
      }

      // ====== EVENTOS ======
      ;[levelBasic, levelAdv].forEach(el=>el.addEventListener('change', ()=>{ setLevelUI(); updateBasic(); updateAdvanced(); }));

      // Aproximado
      ;[bestOdds, boostOdds, basicComm].forEach(el=>el.addEventListener('input', updateBasic));

      // Avanzado
      ;[legs1,legs2,legs3].forEach(el=>el && el.addEventListener('change', updateAdvanced));

      ;[
        oBoost,oEx,exComm,oNoBook,oNoBookYes,o1,oX,o2,pick,asmYes,asmComm,
        boost2,useComboRef,comboRefOdds,comboRefComm,
        boost3,useComboRef3,comboRefOdds3,comboRefComm3
      ].forEach(el=>el && el.addEventListener('input', updateAdvanced));

      ;[modeEx,modeBook2,modeBook3,modeNone,useComboRef,
        legAType,legBType,legA3Type,legB3Type,legCType,useComboRef3,
        exRefZero,exRefBook
      ].forEach(el=>el && el.addEventListener('change', ()=>{ toggleLegBlocks(); updateAdvanced(); }));

      // DEMO INICIAL
      bestOdds.value = '1,6';
      boostOdds.value= '2';
      basicComm.value= '10';

      oBoost.value = '2';
      oEx.value    = '1,54';
      exComm.value = '2';
      oNoBookYes.value='1,44';
      oNoBook.value= '2,55';
      o1.value='1,54'; oX.value='4,50'; o2.value='5,50'; pick.value='1';
      asmYes.value='1,50'; asmComm.value='10';

      boost2 && (boost2.value='2');
      boost3 && (boost3.value='3');

      setLevelUI();
      modeEx.checked = true;
      updateBasic();
      updateAdvanced();
    })();
  </script>

  <!-- FIREBASE / AUTH UI (igual que en tu versi√≥n original) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBpvJVoiEe_ELuJGtDt7wfpkDSDK77gmqc",
      authDomain: "secreto-matchbetting.firebaseapp.com",
      projectId: "secreto-matchbetting",
      storageBucket: "secreto-matchbetting.appspot.com",
      messagingSenderId: "742895000020",
      appId: "1:742895000020:web:6d5e5f43df2706e0f95e41",
      measurementId: "G-E9R9X4D48D"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    document.addEventListener('DOMContentLoaded', () => {
      const userStatusDiv = document.getElementById('user-status');

      onAuthStateChanged(auth, user => {
        userStatusDiv.innerHTML = '';
        if (user) {
          userStatusDiv.innerHTML = `
            <span class="text-sm text-slate-300 hidden sm:inline">${user.email}</span>
            <button id="logout-button" class="bg-slate-800 text-slate-100 px-3 py-1 rounded-md text-sm font-semibold hover:bg-slate-700">
              Salir
            </button>
          `;
          document.getElementById('logout-button').addEventListener('click', () => {
            signOut(auth).then(() => { window.location.href = '/index.html'; });
          });
        } else {
          userStatusDiv.innerHTML = `
            <a href="/index.html" class="bg-emerald-500 text-slate-950 px-4 py-2 rounded-md font-semibold hover:bg-emerald-400">
              Acceder
            </a>
          `;
        }
      });
    });
  </script>
</body>
</html>
